{"version":3,"sources":["admin.js","all.js","c3.js","config.js","default.js"],"names":["orderData","orderList","document","querySelector","init","getOrderList","renderC3","obj","forEach","item","productItem","products","productItems","title","undefined","price","quantity","rank","Object","entries","sort","a","b","length","otherTotal","index","splice","push","console","log","chart","c3","generate","bindto","data","type","columns","color","pattern","axios","get","apiPath","headers","token","then","response","orders","str","productStr","timeStamp","Date","createdAt","createdTime","getFullYear","getMonth","getDate","orderStatus","paid","id","user","name","tel","address","email","innerHTML","addEventListener","e","preventDefault","targetBtn","target","getAttribute","itemId","itemStatus","changeOrderStatus","deleteOrderItem","newItemStatus","put","alert","discardAllBtn","error","ele","style","cursor","pos","top","left","x","y","mouseDownHandler","userSelect","scrollLeft","scrollTop","clientX","clientY","mouseMoveHandler","mouseUpHandler","dx","dy","removeProperty","removeEventListener","menuOpenBtn","linkBtn","querySelectorAll","menu","menuToggle","closeMenu","classList","contains","remove","add","getProductList","getCartList","productList","productData","renderProductList","combineProductInfo","images","toThousands","origin_price","productSelect","category","value","cartList","finalTotal","cartData","carts","product","textContent","addCardBtn","productId","productTitle","productNum","post","cartId","orderInfoBtn","customerName","customerPhone","customerEmail","customerAddress","tradeWay","parts","toString","split","replace","join"],"mappings":"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AAQ,CAACC,aAAT,CAAuB,kBAAvB,EAA2CsH,KAA3C,GAAiD,EAAjD;AACAvH,IAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCsH,KAApC,GAA0C,KAA1C;AACA7F,IAAAA,OAAO,CAACC,GAAR,CAAY6G,eAAZ;AACA3B,IAAAA,WAAW;AACZ,GApBH;AAqBD,CArCD,E,CAuCA;;AACA,SAASM,WAAT,CAAqB/B,CAArB,EAAuB;AACrB,MAAIsD,KAAK,GAAGtD,CAAC,CAACuD,QAAF,GAAaC,KAAb,CAAmB,GAAnB,CAAZ;AACAF,EAAAA,KAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAAL,CAASG,OAAT,CAAiB,uBAAjB,EAA0C,GAA1C,CAAX;AACA,SAAOH,KAAK,CAACI,IAAN,CAAW,GAAX,CAAP;AACD,C,CAGD;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA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","file":"all.js","sourcesContent":["let orderData = []; // 用來儲存需要用到的資料\r\nconst orderList = document.querySelector(\".orderList\"); //選取表單內容\r\n\r\n// 初始化\r\nfunction init(){\r\n    getOrderList();\r\n}\r\ninit();\r\n\r\n// 圓餅圖\r\nfunction renderC3(){\r\n    let obj = {};\r\n    // LV1\r\n    orderData.forEach(function(item){\r\n        let productItem = item.products;\r\n        productItem.forEach(function(productItems){\r\n            if(obj[productItems.title]==undefined){\r\n                obj[productItems.title]=productItems.price*productItems.quantity;\r\n            }else{\r\n                obj[productItems.title]+=productItems.price*productItems.quantity;\r\n            }\r\n        })\r\n    });\r\n    \r\n    // LV2\r\n    // 依營收重新排列品項\r\n    let rank = Object.entries(obj)\r\n    rank.sort(function(a, b){\r\n    return b[1] - a[1];\r\n    })\r\n    \r\n    if(rank.length>3){\r\n        let otherTotal = 0;\r\n        rank.forEach(function(item, index){\r\n            if(index>2){\r\n                otherTotal+=rank[index][1];\r\n            }\r\n        })\r\n        rank.splice(3, rank.length-1);\r\n        rank.push([\"其他\", otherTotal])\r\n    }\r\n    console.log(rank);\r\n    // 生成 c3 圖表\r\n    let chart = c3.generate({\r\n        bindto: '#chart', // HTML 元素綁定\r\n        data: {\r\n            type: \"donut\",\r\n            columns: rank,\r\n        },\r\n        color:{\r\n            pattern:[\"#301E5F\",\"#5434A7\", \"#9D7FEA\", \"#DACBFF\"]\r\n        }\r\n    });\r\n}\r\n\r\n// 取得表單資料\r\nfunction getOrderList(){\r\n    // 接使用者 API 路徑及金鑰\r\n    axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${apiPath}/orders`, \r\n        {headers:{\"authorization\": token}\r\n    })\r\n    .then (function(response){\r\n        orderData = response.data.orders;\r\n        // 訂單管理\r\n        let str = \"\";\r\n        orderData.forEach(function(item){\r\n\r\n            // 訂單品項處理\r\n            let productStr = \"\";\r\n            let productItem = item.products;\r\n            productItem.forEach(function(productItems){\r\n                productStr+=`<p>${productItems.title} *${productItems.quantity}</p>`\r\n            })\r\n\r\n            // 時間狀態處理\r\n            const timeStamp = new Date(item.createdAt*1000); // new Date 語法只支援 13碼，要把時間戳從 10 碼轉成 13 碼>>直接 *1000\r\n            let createdTime = `${timeStamp.getFullYear()}/${timeStamp.getMonth()+1}/${timeStamp.getDate()}`;\r\n\r\n            // 訂單狀態處理\r\n            let orderStatus = \"\";\r\n            if(item.paid==true){\r\n                orderStatus=\"已處理\";\r\n            }else if(item.paid==false){\r\n                orderStatus=\"未處理\";\r\n            }else{\r\n                orderStatus=\"狀態錯誤\";\r\n            }\r\n            // 訂單資訊組合\r\n            str+=\r\n                `<tr>\r\n                    <td>${item.id}</td>\r\n                    <td>\r\n                        <p>${item.user.name}</p>\r\n                        <p>${item.user.tel}</p>\r\n                    </td>\r\n                    <td>${item.user.address}</td>\r\n                    <td>${item.user.email}</td>\r\n                    <td>\r\n                        <p>${productStr}</p>\r\n                    </td>\r\n                    <td>${createdTime}</td>\r\n                    <td>\r\n                        <a href=\"#\" class=\"orderStatus\" data-status=\"${item.paid}\" data-id=\"${item.id}\">${orderStatus}</a>\r\n                    </td>\r\n                    <td>\r\n                        <input type=\"button\" class=\"delSingleOrder-Btn orderDelete\" value=\"刪除\" data-id=\"${item.id}\">\r\n                    </td>\r\n                </tr>`\r\n        })\r\n        orderList.innerHTML = str;\r\n        renderC3();\r\n    })\r\n}\r\n\r\n// 監聽表單 tbody 中的按鈕事件：1.訂單狀態 2.刪除\r\norderList.addEventListener(\"click\", function(e){\r\n    e.preventDefault(); //防跳轉至頂\r\n\r\n    // 設定觸發條件：以按鈕的 class 判斷點到哪個按鈕\r\n    const targetBtn = e.target.getAttribute(\"class\");\r\n    // 設定資料庫要回傳的資料條件\r\n    const itemId = e.target.getAttribute(\"data-id\")\r\n    const itemStatus = e.target.getAttribute(\"data-status\");\r\n    \r\n    // 1. 點到訂單狀態按鈕：觸發修改訂單狀態\r\n    if(targetBtn==\"orderStatus\"){\r\n        changeOrderStatus(itemStatus, itemId);\r\n    }\r\n    // 2. 點到刪除按鈕：觸發刪除單筆資料\r\n    else if(targetBtn==\"delSingleOrder-Btn orderDelete\"){\r\n        deleteOrderItem(itemId);\r\n    }\r\n\r\n})\r\n\r\n// 修改訂單狀態\r\nfunction changeOrderStatus(itemStatus, itemId){\r\n    //狀態切換條件\r\n    let newItemStatus;\r\n    if(itemStatus!=true){\r\n        newItemStatus=true;\r\n    }else{\r\n        newItemStatus=false;\r\n    };\r\n    \r\n    axios.put(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${apiPath}/orders`, \r\n        {\r\n            \"data\": {\r\n            \"id\": itemId,\r\n            \"paid\": newItemStatus,\r\n            },\r\n        },\r\n        {\r\n            headers:{\"authorization\": token},\r\n        })\r\n    .then(function(response){\r\n        alert(\"變更成功\");\r\n        getOrderList();\r\n    })\r\n}\r\n\r\n// 刪除單筆資料\r\nfunction deleteOrderItem(itemId){\r\n    axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${apiPath}/orders/${itemId}`, \r\n        {headers:{\"authorization\": token}\r\n    })\r\n    .then(function(response){\r\n        alert(\"刪除成功\");\r\n        getOrderList();\r\n    })\r\n}\r\n\r\n// 刪除全部資料\r\nconst discardAllBtn = document.querySelector(\".discardAllBtn\");\r\ndiscardAllBtn.addEventListener(\"click\", function(e){\r\n    e.preventDefault();\r\n    axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${apiPath}/orders`, \r\n        {headers:{\"authorization\": token}\r\n            })\r\n    .then(function(response){\r\n        alert(\"全部刪除成功\");\r\n        getOrderList();\r\n    })\r\n    .catch(function(error){\r\n        alert(\"已無訂單\");\r\n    })\r\n})\r\n\r\n","// <!-- 預設 JS，請同學不要修改此處 -->\ndocument.addEventListener('DOMContentLoaded', function() {\n  const ele = document.querySelector('.recommendation-wall');\n  ele.style.cursor = 'grab';\n  let pos = { top: 0, left: 0, x: 0, y: 0 };\n  const mouseDownHandler = function(e) {\n      ele.style.cursor = 'grabbing';\n      ele.style.userSelect = 'none';\n\n      pos = {\n          left: ele.scrollLeft,\n          top: ele.scrollTop,\n          // Get the current mouse position\n          x: e.clientX,\n          y: e.clientY,\n      };\n\n      document.addEventListener('mousemove', mouseMoveHandler);\n      document.addEventListener('mouseup', mouseUpHandler);\n  };\n  const mouseMoveHandler = function(e) {\n      // How far the mouse has been moved\n      const dx = e.clientX - pos.x;\n      const dy = e.clientY - pos.y;\n\n      // Scroll the element\n      ele.scrollTop = pos.top - dy;\n      ele.scrollLeft = pos.left - dx;\n  };\n  const mouseUpHandler = function() {\n      ele.style.cursor = 'grab';\n      ele.style.removeProperty('user-select');\n\n      document.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler);\n  };\n  // Attach the handler\n  ele.addEventListener('mousedown', mouseDownHandler);\n});\n// menu 切換\nlet menuOpenBtn = document.querySelector('.menuToggle');\nlet linkBtn = document.querySelectorAll('.topBar-menu a');\nlet menu = document.querySelector('.topBar-menu');\nmenuOpenBtn.addEventListener('click', menuToggle);\n\nlinkBtn.forEach((item) => {\n  item.addEventListener('click', closeMenu);\n})\n\nfunction menuToggle() {\n  if(menu.classList.contains('openMenu')) {\n      menu.classList.remove('openMenu');\n  }else {\n      menu.classList.add('openMenu');\n  }\n}\nfunction closeMenu() {\n  menu.classList.remove('openMenu');\n}\n\n\n// 載入資料庫、金鑰、環境變數\nconst apiPath = \"ryanchiangfinaleaxam\";\nconst token = \"Jsbl8ongs9P32p2iKyLykEVQxcG2\";\n\n\n// 初始化\nfunction init(){\n  getProductList();\n  getCartList();\n}\ninit();\n\n// 一、商品列表\n\n// 取得商品列表\nconst productList = document.querySelector(\".productWrap\");\nlet productData = [];\nfunction getProductList(){\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/products\n  `)\n  .then(function(response){\n      productData = response.data.products;\n      renderProductList()\n      \n  })\n}\n\n//(重構) 商品資訊組合：統一組字串\nfunction combineProductInfo(item){\n  return `\n  <li class=\"productCard\">\n      <h4 class=\"productType\">新品</h4>\n      <img src=\"${item.images}\" alt=\"\">\n      <a href=\"#\" class=\"addCardBtn\" data-id=\"${item.id}\" data-title=\"${item.title}\">加入購物車</a>\n      <h3>${item.title}</h3>\n      <del class=\"originPrice\">NT$${toThousands(item.origin_price)}</del>\n      <p class=\"nowPrice\">NT$${toThousands(item.price)}</p>\n  </li>`\n}\n\n// 渲染商品列表\nfunction renderProductList(){\n  let str = \"\";\n      productData.forEach(function(item){\n          str+=combineProductInfo(item);\n      })\n      productList.innerHTML = str;\n}\n\n// 商品列表選單切換事件\nconst productSelect = document.querySelector(\".productSelect\");\nproductSelect.addEventListener(\"change\", function(e){\n  const category = e.target.value;\n  if(category==\"全部\"){\n      renderProductList();\n      return;\n  }\n  let str = \"\";\n  productData.forEach(function(item){\n      if(item.category == category){\n          str+=str+=combineProductInfo(item);\n      }\n  })\n  productList.innerHTML = str;\n})\n\n// 二、購物車\n\n// 取得購物車資料\nconst cartList = document.querySelector(\".shoppingCart-tableList\");\nconst finalTotal = document.querySelector(\".finalTotal\");\nlet cartData = [];\nfunction getCartList(){\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/carts\n  `)\n  .then(function(response){\n      cartData = response.data.carts;\n      getCartList();\n      let str = \"\";\n      cartData.forEach(function(item){\n          str+=\n              `<tr>\n                  <td>\n                      <div class=\"cardItem-title\">\n                          <img src=\"${item.product.images}\" alt=\"\">\n                          <p>${item.product.title}</p>\n                      </div>\n                  </td>\n                  <td>NT$${toThousands(item.product.origin_price)}</td>\n                  <td>${item.quantity}</td>\n                  <td>NT$${toThousands(item.product.price)}</td>\n                  <td class=\"discardBtn\">\n                      <a href=\"#\" class=\"material-icons\" data-id=\"${item.id}\" data-title=\"${item.product.title}\">\n                          clear\n                      </a>\n                  </td>\n              </tr>`\n      })\n      // 取得購物車資料\n      cartList.innerHTML = str;\n      //取得總金額\n      finalTotal.textContent = toThousands(response.data.finalTotal);\n  })\n}\n\n// 加入購物車事件\n  // 監聽對象是商品列表 productList ，再用 if 去確保點擊到按鈕 addCardBtn 才會觸發事件\n  // 因為 querySelector 只能綁單一 class；querySelectorAll 需要每顆按鈕個別綁定，資料越多越難管理，也會拖慢效能\n  // 監聽最好都寫在外層，用最外層去綁監聽，再去選擇內部的觸發點最保險\nproductList.addEventListener(\"click\", function(e){\n  // 取消默認的行為(錨點點擊後會至頂)\n  e.preventDefault(); \n  \n  // 確保點擊按鈕才會觸發\n  let addCardBtn = e.target.getAttribute(\"class\");\n      if(addCardBtn!== \"addCardBtn\") {\n      return;  // 點到按鈕以外的區塊沒有反應\n  }\n  \n  // 新增一筆 data-id 到 商品資訊組合 的按鈕<a>標籤上，並賦予 item 的 id，用 id 來回傳商品的加入購物車事件\n  // 如果加入購物車事件被觸發，productId即為商品資訊上的 data-id\n  let productId = e.target.getAttribute(\"data-id\");\n  let productTitle = e.target.getAttribute(\"data-title\"); // 額外：在 alert 帶入商品名稱\n  \n  \n  // 用 forEach 跑一次購物車資料，判斷購物車內是否已經有相同品項，如果有 item.quantity +1\n  let productNum = 1;\n  cartData.forEach(function(item){\n      if(item.product.id === productId){\n          productNum = item.quantity + 1;\n          \n      }\n  })\n  \n  // 把新增的購物車資料 post 回資料庫\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/carts`, {\n      \"data\": {\n        \"productId\": productId,\n        \"quantity\": productNum,\n      }\n    }).then(function(response){\n      \n      alert(`${productTitle} 已加入購物車`);\n      getCartList();\n    })\n})\n\n// 購物車取消事件\n// 監聽購物車清單\ncartList.addEventListener(\"click\", function(e){\n  // 取消默認的行為(錨點點擊後會至頂)\n  e.preventDefault();\n  // 用 data-id 取得觸發事件的商品 Id\n  const cartId = e.target.getAttribute(\"data-id\");\n  \n\n  // 只有按鈕能夠回傳 cartId，限定點擊按鈕，其他區域無效\n  if(cartId==null){\n      return;\n  }\n  \n  let productTitle = e.target.getAttribute(\"data-title\"); // 額外：在 alert 帶入商品名稱\n  // 連接資料庫\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/carts/${cartId}`)\n  .then(function(response){\n      alert(`已刪除 ${productTitle}`);\n      getCartList(); // 重新渲染，整理目前資料\n  })\n})\n\n// 刪除整個購物車事件\n//監聽全部刪除按鈕\nconst discardAllBtn = document.querySelector(\".discardAllBtn\");\ndiscardAllBtn.addEventListener(\"click\", function(e){\n  e.preventDefault();\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/carts`)\n  .then(function(response){\n      alert(`已全部刪除`);\n      getCartList(); // 重新渲染，整理目前資料\n  })\n  .catch(function(response){\n      alert(`購物車沒有東西`);\n  })\n})\n\n// 送出訂單事件\nconst orderInfoBtn =  document.querySelector(\".orderInfo-btn\");\norderInfoBtn.addEventListener(\"click\", function(e){\n  e.preventDefault();\n  const customerName = document.querySelector(\"#customerName\").value;\n  const customerPhone = document.querySelector(\"#customerPhone\").value;\n  const customerEmail = document.querySelector(\"#customerEmail\").value;\n  const customerAddress = document.querySelector(\"#customerAddress\").value;\n  const tradeWay = document.querySelector(\"#tradeWay\").value;\n  if(cartData.length==0){\n      alert(\"購物車是空的\");\n      return;\n  }else if(customerName ==\"\" ||customerPhone ==\"\" ||customerEmail ==\"\" ||customerAddress ==\"\" ||tradeWay ==\"\"){\n      alert(\"資料不可以留空\");\n      return;\n  }\n\n  // post 傳回訂單資料\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/orders`,{\n      \"data\": {\n        \"user\": {\n          \"name\": customerName,\n          \"tel\": customerPhone,\n          \"email\": customerEmail,\n          \"address\": customerAddress,\n          \"payment\": tradeWay,\n        }\n      }\n    }).then(function(response){\n      alert(\"已送出訂單\");\n      // 表單回復預設值\n      document.querySelector(\"#customerName\").value=\"\";\n      document.querySelector(\"#customerPhone\").value=\"\";\n      document.querySelector(\"#customerEmail\").value=\"\";\n      document.querySelector(\"#customerAddress\").value=\"\";\n      document.querySelector(\"#tradeWay\").value=\"ATM\";\n      console.log(customerAddress)\n      getCartList();\n    })\n})\n\n// 千分位工具\nfunction toThousands(x){\n  let parts = x.toString().split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  return parts.join(\".\");\n}\n\n\n// let orderData = []; // 用來儲存需要用到的資料\n// const orderList = document.querySelector(\".orderList\"); //選取表單內容\n\n// // 初始化\n// function initAdmin(){\n//     getOrderList();\n// }\n// initAdmin();\n\n// // 圓餅圖\n// function renderC3(){\n//     let obj = {};\n//     // LV1\n//     orderData.forEach(function(item){\n//         let productItem = item.products;\n//         productItem.forEach(function(productItems){\n//             if(obj[productItems.title]==undefined){\n//                 obj[productItems.title]=productItems.price*productItems.quantity;\n//             }else{\n//                 obj[productItems.title]+=productItems.price*productItems.quantity;\n//             }\n//         })\n//     });\n    \n//     // LV2\n//     // 依營收重新排列品項\n//     let rank = Object.entries(obj)\n//     rank.sort(function(a, b){\n//     return b[1] - a[1];\n//     })\n    \n//     if(rank.length>3){\n//         let otherTotal = 0;\n//         rank.forEach(function(item, index){\n//             if(index>2){\n//                 otherTotal+=rank[index][1];\n//             }\n//         })\n//         rank.splice(3, rank.length-1);\n//         rank.push([\"其他\", otherTotal])\n//     }\n//     console.log(rank);\n//     // 生成 c3 圖表\n//     let chart = c3.generate({\n//         bindto: '#chart', // HTML 元素綁定\n//         data: {\n//             type: \"donut\",\n//             columns: rank,\n//         },\n//         color:{\n//             pattern:[\"#301E5F\",\"#5434A7\", \"#9D7FEA\", \"#DACBFF\"]\n//         }\n//     });\n// }\n\n// // 取得表單資料\n// function getOrderList(){\n//     // 接使用者 API 路徑及金鑰\n//     axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${apiPath}/orders`, \n//         {headers:{\"authorization\": token}\n//     })\n//     .then (function(response){\n//         orderData = response.data.orders;\n//         // 訂單管理\n//         let str = \"\";\n//         orderData.forEach(function(item){\n\n//             // 訂單品項處理\n//             let productStr = \"\";\n//             let productItem = item.products;\n//             productItem.forEach(function(productItems){\n//                 productStr+=`<p>${productItems.title} *${productItems.quantity}</p>`\n//             })\n\n//             // 時間狀態處理\n//             const timeStamp = new Date(item.createdAt*1000); // new Date 語法只支援 13碼，要把時間戳從 10 碼轉成 13 碼>>直接 *1000\n//             let createdTime = `${timeStamp.getFullYear()}/${timeStamp.getMonth()+1}/${timeStamp.getDate()}`;\n\n//             // 訂單狀態處理\n//             let orderStatus = \"\";\n//             if(item.paid==true){\n//                 orderStatus=\"已處理\";\n//             }else if(item.paid==false){\n//                 orderStatus=\"未處理\";\n//             }else{\n//                 orderStatus=\"狀態錯誤\";\n//             }\n//             // 訂單資訊組合\n//             str+=\n//                 `<tr>\n//                     <td>${item.id}</td>\n//                     <td>\n//                         <p>${item.user.name}</p>\n//                         <p>${item.user.tel}</p>\n//                     </td>\n//                     <td>${item.user.address}</td>\n//                     <td>${item.user.email}</td>\n//                     <td>\n//                         <p>${productStr}</p>\n//                     </td>\n//                     <td>${createdTime}</td>\n//                     <td>\n//                         <a href=\"#\" class=\"orderStatus\" data-status=\"${item.paid}\" data-id=\"${item.id}\">${orderStatus}</a>\n//                     </td>\n//                     <td>\n//                         <input type=\"button\" class=\"delSingleOrder-Btn orderDelete\" value=\"刪除\" data-id=\"${item.id}\">\n//                     </td>\n//                 </tr>`\n//         })\n//         orderList.innerHTML = str;\n//         renderC3();\n//     })\n// }\n\n// // 監聽表單 tbody 中的按鈕事件：1.訂單狀態 2.刪除\n// orderList.addEventListener(\"click\", function(e){\n//     e.preventDefault(); //防跳轉至頂\n\n//     // 設定觸發條件：以按鈕的 class 判斷點到哪個按鈕\n//     const targetBtn = e.target.getAttribute(\"class\");\n//     // 設定資料庫要回傳的資料條件\n//     const itemId = e.target.getAttribute(\"data-id\")\n//     const itemStatus = e.target.getAttribute(\"data-status\");\n    \n//     // 1. 點到訂單狀態按鈕：觸發修改訂單狀態\n//     if(targetBtn==\"orderStatus\"){\n//         changeOrderStatus(itemStatus, itemId);\n//     }\n//     // 2. 點到刪除按鈕：觸發刪除單筆資料\n//     else if(targetBtn==\"delSingleOrder-Btn orderDelete\"){\n//         deleteOrderItem(itemId);\n//     }\n\n// })\n\n// // 修改訂單狀態\n// function changeOrderStatus(itemStatus, itemId){\n//     //狀態切換條件\n//     let newItemStatus;\n//     if(itemStatus!=true){\n//         newItemStatus=true;\n//     }else{\n//         newItemStatus=false;\n//     };\n    \n//     axios.put(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${apiPath}/orders`, \n//         {\n//             \"data\": {\n//             \"id\": itemId,\n//             \"paid\": newItemStatus,\n//             },\n//         },\n//         {\n//             headers:{\"authorization\": token},\n//         })\n//     .then(function(response){\n//         alert(\"變更成功\");\n//         getOrderList();\n//     })\n// }\n\n// // 刪除單筆資料\n// function deleteOrderItem(itemId){\n//     axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${apiPath}/orders/${itemId}`, \n//         {headers:{\"authorization\": token}\n//     })\n//     .then(function(response){\n//         alert(\"刪除成功\");\n//         getOrderList();\n//     })\n// }\n\n// // 刪除全部資料\n// const discardAllOrderBtn = document.querySelector(\".discardAllOrderBtn\");\n// discardAllOrderBtn.addEventListener(\"click\", function(e){\n//     e.preventDefault();\n//     axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${apiPath}/orders`, \n//         {headers:{\"authorization\": token}\n//             })\n//     .then(function(response){\n//         alert(\"全部刪除成功\");\n//         getOrderList();\n//     })\n//     .catch(function(error){\n//         alert(\"已無訂單\");\n//     })\n// })\n\n","","// 載入資料庫、金鑰、環境變數\r\nconst apiPath = \"ryanchiangfinaleaxam\";\r\nconst token = \"Jsbl8ongs9P32p2iKyLykEVQxcG2\";\r\n","// <!-- 預設 JS，請同學不要修改此處 -->\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    const ele = document.querySelector('.recommendation-wall');\r\n    ele.style.cursor = 'grab';\r\n    let pos = { top: 0, left: 0, x: 0, y: 0 };\r\n    const mouseDownHandler = function(e) {\r\n        ele.style.cursor = 'grabbing';\r\n        ele.style.userSelect = 'none';\r\n\r\n        pos = {\r\n            left: ele.scrollLeft,\r\n            top: ele.scrollTop,\r\n            // Get the current mouse position\r\n            x: e.clientX,\r\n            y: e.clientY,\r\n        };\r\n\r\n        document.addEventListener('mousemove', mouseMoveHandler);\r\n        document.addEventListener('mouseup', mouseUpHandler);\r\n    };\r\n    const mouseMoveHandler = function(e) {\r\n        // How far the mouse has been moved\r\n        const dx = e.clientX - pos.x;\r\n        const dy = e.clientY - pos.y;\r\n\r\n        // Scroll the element\r\n        ele.scrollTop = pos.top - dy;\r\n        ele.scrollLeft = pos.left - dx;\r\n    };\r\n    const mouseUpHandler = function() {\r\n        ele.style.cursor = 'grab';\r\n        ele.style.removeProperty('user-select');\r\n\r\n        document.removeEventListener('mousemove', mouseMoveHandler);\r\n        document.removeEventListener('mouseup', mouseUpHandler);\r\n    };\r\n    // Attach the handler\r\n    ele.addEventListener('mousedown', mouseDownHandler);\r\n});\r\n// menu 切換\r\nlet menuOpenBtn = document.querySelector('.menuToggle');\r\nlet linkBtn = document.querySelectorAll('.topBar-menu a');\r\nlet menu = document.querySelector('.topBar-menu');\r\nmenuOpenBtn.addEventListener('click', menuToggle);\r\n\r\nlinkBtn.forEach((item) => {\r\n    item.addEventListener('click', closeMenu);\r\n})\r\n\r\nfunction menuToggle() {\r\n    if(menu.classList.contains('openMenu')) {\r\n        menu.classList.remove('openMenu');\r\n    }else {\r\n        menu.classList.add('openMenu');\r\n    }\r\n}\r\nfunction closeMenu() {\r\n    menu.classList.remove('openMenu');\r\n}\r\n"]}